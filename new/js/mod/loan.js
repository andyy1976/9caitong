define("new/js/mod/loan",["$","new/js/mod/util/lang"],function(e){var l=e("$"),a=e("new/js/mod/util/lang").lang;l(document).ready(function(){var e=parseFloat(l("#dep_balance").html()),n=parseFloat(l("#Repayments").html());n>e?l("#tips_balance_low").removeClass("hidden"):l("#tips_balance_low").addClass("hidden"),l("#sub_btn_repayment").click(function(){if(l(this).hasClass("btn_disable"))return!1;if(n>e)return l("#tips_balance_low").removeClass("hidden"),layer.tips("余额不足，请前往充值","#dep_balance",{tips:1}),!1;if(!l("#LoanAgreement").is(":checked"))return layer.tips("请确认已阅读并同意《还款协议》","#LoanAgreement",{tips:1}),l("#LoanAgreement").focus(),!1;l(this).addClass("btn_disable"),layer.load(1);var t=l("#form_loan").attr("ajax_url"),o=new Object;o.bid=l("#deal_id").val(),l.ajax({url:t,data:o,type:"post",dataType:"json",success:function(e){layer.closeAll("loading"),1==e.status?layer.alert(e.info,{title:"提示",icon:1,closeBtn:0},function(){window.location.href=e.jump}):2==e.status?window.location.href=e.jump:layer.alert(e.info,{title:"提示",icon:5,closeBtn:0},function(){l("#sub_btn_repayment").removeClass("btn_disable"),layer.closeAll()})},error:function(){layer.closeAll("loading"),layer.alert(a.REQUEST_DATA_FAILED,{title:"错误",icon:2,closeBtn:0}),l("#sub_btn_repayment").removeClass("btn_disable")}})})}),l("#loan_protocol").click(function(){layer.open({type:1,area:["800px","650px"],title:"还款协议",content:l(".protocol_con")})}),l(".protocol_con .closebtn a").live("click",function(){layer.closeAll()})});